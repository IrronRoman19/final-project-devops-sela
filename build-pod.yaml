apiVersion: v1
kind: Pod
metadata:
  name: docker-image-build
spec:
  containers:
  - name: ez-docker-helm-build
    image: ezezeasy/ez-docker-helm-build:1.41
    imagePullPolicy: Always
    securityContext:
      privileged: true
    command: ["/bin/sh"]
    args: ["-c", "apk add --no-cache docker-compose"]
  - name: mongodb
    image: mongo:4.4
    ports:
      - containerPort: 27017
    env:
      - name: MONGO_INITDB_ROOT_USERNAME
        value: mongoadmin
      - name: MONGO_INITDB_ROOT_PASSWORD
        value: secret
    volumeMounts:
      - name: mongo-data
        mountPath: /data/db
  volumes:
    - name: mongo-data
      emptyDir: {}
